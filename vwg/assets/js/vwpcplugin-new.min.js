function wireEvents(){console.log("wireEvents - begin"),console.log("READY: subscribing to conversationCleared event..."),Genesys("subscribe","MessagingService.conversationCleared",function(){console.log("MessagingService.conversationCleared event invoked"),conversationReset=!0});let s=document.getElementById("myAudio");console.log("READY: subscribing to open event..."),Genesys("subscribe","Messenger.opened",function(){console.log("Messenger.open event invoked"),messengerOpen=!0,1==conversationReset&&Genesys("command","MessagingService.startConversation",{},function(){},function(){console.log(e)}),conversationReset=!1}),console.log("READY: subscribing to closed event..."),Genesys("subscribe","Messenger.closed",function(){messengerOpen=!1}),console.log("READY: subscribing to messagesReceived event..."),Genesys("subscribe","MessagingService.messagesReceived",function({data:e}){0==messengerOpen&&(s.play(),toggleMessenger())}),setWidgetParams(),console.log("wireEvents - end")}function setWidgetParams(){console.log("COMMAND: Set customAttributes"),Genesys("command","Database.set",{messaging:{customAttributes:{TargetBrand:"VWPC"}}})}function toggleMessenger(){Genesys("command","Messenger.open",{},function(e){},function(e){Genesys("command","Messenger.close")})}let conversationEnd=localStorage.getItem("conversationEnd"),surveyDone=localStorage.getItem("surveyDone"),loaded=!1,conversationReset=!1;null!=conversationEnd&&null!=conversationEnd||(conversationEnd="false"),null!=surveyDone&&null!=surveyDone||(surveyDone="false"),Genesys("subscribe","Messenger.ready",function(){console.log("Messenger.Ready event"),wireEvents()}),Genesys("subscribe","MessagingService.conversationDisconnected",function(){setWidgetParams(),loaded||(loaded=!0,conversationEnd="true",localStorage.setItem("conversationEnd","true"),console.log("end of conversation"),console.log(conversationEnd),console.log(surveyDone),"false"==surveyDone&&(localStorage.setItem("surveyDone","true"),console.log("COMMAND: Start Survey"),Genesys("command","MessagingService.sendMessage",{message:"How did we do?"})))}),Genesys("subscribe","Conversations.started",function(){console.log("new conversation"),setWidgetParams(),conversationEnd="false",surveyDone="false",loaded=!1,localStorage.setItem("conversationEnd","false"),localStorage.setItem("surveyDone","false")});